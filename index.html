<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Openstack by joarder</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Openstack</h1>
        <h2>OpenStack Folsom (with Quantum) Installation Guide</h2>
        <a href="https://github.com/joarder/Openstack" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>Controller Node Installation</h1>

<h1>Network Node Installation</h1>

<h1>Compute Node Installation</h1>

<h2>Install and configure common services</h2>

<p><strong>Install telnet and SSH support for the compute node</strong></p>

<p><code>apt-get install telnet &amp;&amp; apt-get install openssh-server</code></p>

<p><strong>Upload the latest iproute package and install it using dpkg</strong></p>

<p>This package update is necessary if you want to use process network namespace in future for your quantum configuration</p>

<p><code>dpkg -i iproute_20121211-2_amd64.deb</code></p>

<p><strong>Include Cloud Archives for Folsom in the system</strong></p>

<p><code>apt-get install ubuntu-cloud-keyring</code></p>

<p><code>vi /etc/apt/sources.list.d/cloud-archive.list</code></p>

<p><code>deb http://ubuntu-cloud.archive.canonical.com/ubuntu precise-updates/folsom main</code></p>

<p><strong>Update the system</strong></p>

<p><code>apt-get update &amp;&amp; apt-get dist-upgrade &amp;&amp; apt-get upgrade</code></p>

<p><strong>Install VLAN and Bridge utilities and configure NIC to support multiple networks</strong></p>

<p><code>apt-get install -y vlan bridge-utils</code></p>

<p><strong>Install and configure NTP</strong></p>

<p><code>apt-get install -y ntp</code></p>

<p><code>sed -i 's/server ntp.ubuntu.com/server ntp.ubuntu.com\nserver 127.127.1.0\nfudge 127.127.1.0 stratum 10/g' /etc/ntp.conf</code></p>

<p><code>service ntp restart</code></p>

<p><strong>Edit /etc/sysctl.conf</strong></p>

<p><code>vi /etc/sysctl.conf</code></p>

<p><code>net.ipv4.conf.all.rp_filter = 0</code></p>

<p><code>net.ipv4.conf.default.rp_filter = 0</code></p>

<p><code>net.ipv4.ip_forward=1</code></p>

<p><em>If you do not want to reboot the system then just type</em></p>

<p><code>sysctl -p</code></p>

<p><strong>Add the below lines to your .bashrc file</strong> </p>

<p><code>vi ~/.bashrc</code></p>

<p><code>export OS_TENANT_NAME=ADMIN</code></p>

<p><code>export OS_USERNAME=admin</code></p>

<p><code>export OS_PASSWORD=openstack</code></p>

<p><code>export OS_AUTH_URL="http://192.168.0.9:5000/v2.0/"</code></p>

<p><code>export OS_AUTH_STRATEGY=keystone</code></p>

<p><code>export SERVICE_TOKEN=ADMIN</code></p>

<p><code>export SERVICE_ENDPOINT=http://192.168.0.9:35357/v2.0/</code></p>

<h3>Reboot the system</h3>

<p>It will be better to reboot the system at this point to make the effects into the configurations</p>

<p>reboot</p>

<h2>Install and configure KVM Hypervisor</h2>

<h3>Install the packages that we need :</h3>

<p>apt-get install -y kvm libvirt-bin pm-utils</p>

<h3>Configure libvirt:</h3>

<p>Edit /etc/libvirt/qemu.conf file and add :
vi /etc/libvirt/qemu.conf
cgroup_device_acl = [
    "/dev/null", "/dev/full", "/dev/zero",
    "/dev/random", "/dev/urandom",
    "/dev/ptmx", "/dev/kvm", "/dev/kqemu",
    "/dev/rtc", "/dev/hpet", "/dev/net/tun"]</p>

<h3>Disable KVM default virtual bridge to avoid any confusion :</h3>

<p>virsh net-destroy default</p>

<p>virsh net-undefine default</p>

<h3>Allow Live Migrations:</h3>

<p>Edit /etc/libvirt/libvirtd.conf file :
vi /etc/libvirt/libvirtd.conf</p>

<p>listen_tls = 0</p>

<p>listen_tcp = 1</p>

<p>auth_tcp = "none" </p>

<h3>Modify libvirtd_opts variable in /etc/init/libvirt-bin.conf file :</h3>

<p>vi /etc/init/libvirt-bin.conf</p>

<p>env libvirtd_opts="-d -l" </p>

<h3>Edit /etc/default/libvirt-bin file :</h3>

<p>vi /etc/default/libvirt-bin</p>

<p>libvirtd_opts="-d -l"   </p>

<p>Restart libvirt
service libvirt-bin restart</p>

<h2>Install and configure OpenVSwitch</h2>

<h3>Install the openVSwitch:</h3>

<p>apt-get install -y openvswitch-switch openvswitch-datapath-dkms</p>

<h3>Create the bridges (br-int will be used for VM integration):</h3>

<p>ovs-vsctl add-br br-int</p>

<blockquote>
<p>[DEFAULT]
logdir=/var/log/nova
state_path=/var/lib/nova
lock_path=/run/lock/nova
verbose=True
api_paste_config=/etc/nova/api-paste.ini
scheduler_driver=nova.scheduler.simple.SimpleScheduler
s3_host=192.168.0.9
ec2_host=192.168.0.9
ec2_dmz_host=192.168.0.9
rabbit_host=192.168.0.9
cc_host=192.168.0.9
dmz_cidr=169.254.169.254/32
metadata_host=192.168.0.9
metadata_listen=0.0.0.0
nova_url=<a href="http://192.168.0.9:8774/v1.1/">http://192.168.0.9:8774/v1.1/</a>
sql_connection=mysql://nova:openstack@192.168.0.9/nova
ec2_url=<a href="http://192.168.0.9:8773/services/Cloud">http://192.168.0.9:8773/services/Cloud</a>
root_helper=sudo nova-rootwrap /etc/nova/rootwrap.conf</p>

<h1>Auth</h1>

<p>use_deprecated_auth=false
auth_strategy=keystone
keystone_ec2_url=<a href="http://192.168.0.9:5000/v2.0/ec2tokens">http://192.168.0.9:5000/v2.0/ec2tokens</a></p>

<h1>Imaging service</h1>

<p>glance_api_servers=192.168.0.9:9292
image_service=nova.image.glance.GlanceImageService</p>

<h1>Vnc configuration</h1>

<p>novnc_enabled=true
novncproxy_base_url=<a href="http://192.168.0.130:6080/vnc_auto.html">http://192.168.0.130:6080/vnc_auto.html</a>
novncproxy_port=6080
vncserver_proxyclient_address=192.168.0.13
vncserver_listen=0.0.0.0</p>

<h1>Network settings</h1>

<p>network_api_class=nova.network.quantumv2.api.API
quantum_url=<a href="http://192.168.0.9:9696">http://192.168.0.9:9696</a>
quantum_auth_strategy=keystone
quantum_admin_tenant_name=service
quantum_admin_username=quantum
quantum_admin_password=openstack
quantum_admin_auth_url=<a href="http://192.168.0.9:35357/v2.0">http://192.168.0.9:35357/v2.0</a>
libvirt_vif_driver=nova.virt.libvirt.vif.LibvirtHybridOVSBridgeDriver
linuxnet_interface_driver=nova.network.linux_net.LinuxOVSInterfaceDriver
firewall_driver=nova.virt.libvirt.firewall.IptablesFirewallDriver</p>
</blockquote>

<h1>Compute</h1>

<p>compute_driver=libvirt.LibvirtDriver</p>

<h1>Cinder</h1>

<p>volume_api_class=nova.volume.cinder.API
osapi_volume_listen_port=5900</p>

<h1>Credits:</h1>

<ol>
<li><a href="http://docs.openstack.org/folsom/basic-install/content/">Official Guide: Basic Installation Guide for Ubuntu 12.04/12.10 (Folsom)</a></li>
<li><a href="http://docwiki.cisco.com/wiki/Cisco_OpenStack_Edition:_Folsom_Manual_Install">Cisco OpenStack Edition: Folsom Manual Install</a></li>
<li><a href="https://github.com/mseknibilel/OpenStack-Folsom-Install-guide/blob/stable/GRE/OpenStack_Folsom_Install_Guide_WebVersion.rst">Folsom + Quantum on GRE-Tunneling with 3 NIC</a></li>
</ol>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/joarder/Openstack/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/joarder/Openstack/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/joarder/Openstack"></a> is maintained by <a href="https://github.com/joarder">joarder</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>