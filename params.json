{"name":"Openstack","tagline":"OpenStack Folsom (with Quantum) Installation Guide","body":"# Controller Node Installation\r\n\r\n# Network Node Installation\r\n\r\n# Compute Node Installation\r\n\r\n## Install and configure common services\r\n\r\n### Install telnet and SSH support for the compute node\r\napt-get install telnet && apt-get install openssh-server\r\n\r\n### Upload the latest iproute package and install it using dpkg\r\ndpkg -i iproute_20121211-2_amd64.deb\r\n\r\n### Include Cloud Archives for Folsom in the system\r\napt-get install ubuntu-cloud-keyring\r\n\r\nvi /etc/apt/sources.list.d/cloud-archive.list\r\n\r\ndeb http://ubuntu-cloud.archive.canonical.com/ubuntu precise-updates/folsom main\r\n\r\n### Update the system\r\napt-get update && apt-get dist-upgrade && apt-get upgrade\r\n\r\n### Install VLAN and Bridge utilities and configure NIC to support multiple networks\r\napt-get install -y vlan bridge-utils\r\n\r\n### Install and configure NTP\r\napt-get install -y ntp\r\n\r\nsed -i 's/server ntp.ubuntu.com/server ntp.ubuntu.com\\nserver 127.127.1.0\\nfudge 127.127.1.0 stratum 10/g' /etc/ntp.conf\r\n\r\nservice ntp restart\r\n\r\n### Edit /etc/sysctl.conf\r\nvi /etc/sysctl.conf\r\n\r\nnet.ipv4.conf.all.rp_filter = 0\r\n\r\nnet.ipv4.conf.default.rp_filter = 0\r\n\r\nnet.ipv4.ip_forward=1\r\n\r\nIf you do not want to reboot the system then just type \r\n\r\nsysctl -p\r\n\r\n### Reboot the system\r\n\r\nIt will be better to reboot the system at this point to make the effects into the configurations\r\n\r\nreboot\r\n\r\n## Install and configure KVM Hypervisor\r\n\r\n### Install the packages that we need :\r\n\r\napt-get install -y kvm libvirt-bin pm-utils\r\n\r\n### Configure libvirt:\r\n\r\nEdit /etc/libvirt/qemu.conf file and add :\r\nvi /etc/libvirt/qemu.conf\r\ncgroup_device_acl = [\r\n    \"/dev/null\", \"/dev/full\", \"/dev/zero\",\r\n    \"/dev/random\", \"/dev/urandom\",\r\n    \"/dev/ptmx\", \"/dev/kvm\", \"/dev/kqemu\",\r\n    \"/dev/rtc\", \"/dev/hpet\", \"/dev/net/tun\"]\r\n\r\n### Disable KVM default virtual bridge to avoid any confusion :\r\nvirsh net-destroy default\r\n\r\nvirsh net-undefine default\r\n\r\n### Allow Live Migrations:\r\n\r\nEdit /etc/libvirt/libvirtd.conf file :\r\nvi /etc/libvirt/libvirtd.conf\r\n\r\nlisten_tls = 0\r\n\r\nlisten_tcp = 1\r\n\r\nauth_tcp = \"none\" \r\n\r\n### Modify libvirtd_opts variable in /etc/init/libvirt-bin.conf file :\r\nvi /etc/init/libvirt-bin.conf\r\n\r\nenv libvirtd_opts=\"-d -l\" \r\n\r\n### Edit /etc/default/libvirt-bin file :\r\nvi /etc/default/libvirt-bin\r\n\r\nlibvirtd_opts=\"-d -l\"   \r\n\r\nRestart libvirt\r\nservice libvirt-bin restart\r\n\r\n## Install and configure OpenVSwitch\r\n\r\n### Install the openVSwitch:\r\napt-get install -y openvswitch-switch openvswitch-datapath-dkms\r\n\r\n### Create the bridges (br-int will be used for VM integration):\r\novs-vsctl add-br br-int\r\n\r\n## \r\n\r\n\r\n\r\n[DEFAULT]\r\nlogdir=/var/log/nova\r\nstate_path=/var/lib/nova\r\nlock_path=/run/lock/nova\r\nverbose=True\r\napi_paste_config=/etc/nova/api-paste.ini\r\nscheduler_driver=nova.scheduler.simple.SimpleScheduler\r\ns3_host=192.168.0.9\r\nec2_host=192.168.0.9\r\nec2_dmz_host=192.168.0.9\r\nrabbit_host=192.168.0.9\r\ncc_host=192.168.0.9\r\ndmz_cidr=169.254.169.254/32\r\nmetadata_host=192.168.0.9\r\nmetadata_listen=0.0.0.0\r\nnova_url=http://192.168.0.9:8774/v1.1/\r\nsql_connection=mysql://nova:openstack@192.168.0.9/nova\r\nec2_url=http://192.168.0.9:8773/services/Cloud\r\nroot_helper=sudo nova-rootwrap /etc/nova/rootwrap.conf\r\n\r\n# Auth\r\nuse_deprecated_auth=false\r\nauth_strategy=keystone\r\nkeystone_ec2_url=http://192.168.0.9:5000/v2.0/ec2tokens\r\n# Imaging service\r\nglance_api_servers=192.168.0.9:9292\r\nimage_service=nova.image.glance.GlanceImageService\r\n\r\n# Vnc configuration\r\nnovnc_enabled=true\r\nnovncproxy_base_url=http://192.168.0.130:6080/vnc_auto.html\r\nnovncproxy_port=6080\r\nvncserver_proxyclient_address=192.168.0.13\r\nvncserver_listen=0.0.0.0\r\n\r\n# Network settings\r\nnetwork_api_class=nova.network.quantumv2.api.API\r\nquantum_url=http://192.168.0.9:9696\r\nquantum_auth_strategy=keystone\r\nquantum_admin_tenant_name=service\r\nquantum_admin_username=quantum\r\nquantum_admin_password=openstack\r\nquantum_admin_auth_url=http://192.168.0.9:35357/v2.0\r\nlibvirt_vif_driver=nova.virt.libvirt.vif.LibvirtHybridOVSBridgeDriver\r\nlinuxnet_interface_driver=nova.network.linux_net.LinuxOVSInterfaceDriver\r\nfirewall_driver=nova.virt.libvirt.firewall.IptablesFirewallDriver\r\n\r\n# Compute #\r\ncompute_driver=libvirt.LibvirtDriver\r\n\r\n# Cinder #\r\nvolume_api_class=nova.volume.cinder.API\r\nosapi_volume_listen_port=5900\r\n\r\n\r\n\r\n# Credits:\r\n1. [Official Guide: Basic Installation Guide for Ubuntu 12.04/12.10 (Folsom)](http://docs.openstack.org/folsom/basic-install/content/)\r\n2. [Cisco OpenStack Edition: Folsom Manual Install](http://docwiki.cisco.com/wiki/Cisco_OpenStack_Edition:_Folsom_Manual_Install)\r\n3. [Folsom + Quantum on GRE-Tunneling with 3 NIC](https://github.com/mseknibilel/OpenStack-Folsom-Install-guide/blob/stable/GRE/OpenStack_Folsom_Install_Guide_WebVersion.rst)","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}